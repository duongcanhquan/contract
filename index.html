// Node Code để chứa HTML
const html = `
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THÔNG TIN NHÂN SỰ - APCHN</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f4f6f9; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .container { max-width: 900px; background: white; padding: 40px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-top: 30px; margin-bottom: 30px;}
        h2 { color: #2c3e50; font-weight: 700; border-bottom: 2px solid #3498db; padding-bottom: 15px; margin-bottom: 30px; }
        .form-label { font-weight: 600; color: #34495e; }
        .section-title { background: #eaf2f8; padding: 10px 15px; border-radius: 8px; color: #2980b9; font-weight: bold; margin-top: 30px; margin-bottom: 20px; }
        .btn-submit { background: #27ae60; border: none; padding: 12px 40px; font-size: 18px; font-weight: bold; width: 100%; transition: 0.3s; }
        .btn-submit:hover { background: #219150; }
        .note { font-size: 0.9em; color: #7f8c8d; font-style: italic; }
    </style>
</head>
<body>
    <div class="container">
        <div class="text-center mb-4">
            <img src="https://apchn.vn/wp-content/uploads/2023/08/logo-apchn.png" alt="Logo" style="max-height: 80px;">
            <h2 class="mt-3">THÔNG TIN NHÂN SỰ / HR INFORMATION</h2>
        </div>

        <form id="hrForm" enctype="multipart/form-data">
            
            <div class="section-title">1. Thông tin cá nhân / Personal Information</div>
            <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label">Họ và tên / Full Name *</label>
                    <input type="text" class="form-control" name="ho_ten" required>
                </div>
                <div class="col-md-3">
                    <label class="form-label">Giới tính / Gender *</label>
                    <select class="form-select" name="gioi_tinh" required>
                        <option value="">Chọn/Select</option>
                        <option value="Nam">Nam / Male</option>
                        <option value="Nữ">Nữ / Female</option>
                    </select>
                </div>
                 <div class="col-md-3">
                    <label class="form-label">Quốc tịch / Nationality</label>
                    <input type="text" class="form-control" name="quoc_tich" value="Việt Nam">
                </div>
                <div class="col-md-6">
                    <label class="form-label">Ngày sinh / Date of Birth *</label>
                    <input type="date" class="form-control" name="ngay_sinh" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Nơi sinh / Place of Birth</label>
                    <input type="text" class="form-control" name="noi_sinh">
                </div>
                 <div class="col-md-6">
                    <label class="form-label">Số điện thoại / Phone *</label>
                    <input type="text" class="form-control" name="so_dien_thoai" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Email cá nhân / Personal Email *</label>
                    <input type="email" class="form-control" name="email" required>
                </div>
                 <div class="col-md-6">
                    <label class="form-label">Tình trạng hôn nhân / Marital Status</label>
                    <select class="form-select" name="hon_nhan">
                        <option value="Độc thân">Độc thân / Single</option>
                        <option value="Đã kết hôn">Đã kết hôn / Married</option>
                    </select>
                </div>
                <div class="col-12">
                    <label class="form-label">Địa chỉ thường trú / Permanent Address</label>
                    <input type="text" class="form-control" name="dia_chi_thuong_tru">
                </div>
                <div class="col-12">
                    <label class="form-label">Nơi ở hiện tại / Current Address</label>
                    <input type="text" class="form-control" name="noi_o_hien_tai">
                </div>
            </div>

            <div class="section-title">2. Giấy tờ tùy thân / ID Card</div>
             <div class="row g-3">
                <div class="col-md-4">
                    <label class="form-label">Số CCCD / ID Number *</label>
                    <input type="text" class="form-control" name="so_cccd" required>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Ngày Cấp / Date of Issue</label>
                    <input type="date" class="form-control" name="ngay_cap_cccd">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Nơi cấp / Place of Issue</label>
                    <input type="text" class="form-control" name="noi_cap_cccd">
                </div>
             </div>

            <div class="section-title">3. Trình độ học vấn / Education</div>
             <div class="row g-3">
                <div class="col-md-4">
                    <label class="form-label">Trình độ / Degree</label>
                    <select class="form-select" name="trinh_do">
                        <option value="Cao đẳng">Cao đẳng</option>
                        <option value="Đại học">Đại học</option>
                        <option value="Thạc Sỹ">Thạc Sỹ</option>
                        <option value="Tiến Sỹ">Tiến Sỹ</option>
                        <option value="Khác">Khác</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Chuyên ngành / Major</label>
                    <input type="text" class="form-control" name="chuyen_nganh">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Trường đào tạo / University</label>
                    <input type="text" class="form-control" name="truong_dao_tao">
                </div>
                <div class="col-12">
                    <label class="form-label">Bằng cấp khác (nếu có)</label>
                    <input type="text" class="form-control" name="bang_cap_khac">
                </div>
             </div>

             <div class="section-title">4. Thông tin Ngân hàng & Thuế / Bank & Tax</div>
             <div class="row g-3">
                <div class="col-md-4">
                    <label class="form-label">Tên chủ tài khoản</label>
                    <input type="text" class="form-control" name="ten_tk_ngan_hang" style="text-transform: uppercase;">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Số tài khoản</label>
                    <input type="text" class="form-control" name="so_tk_ngan_hang">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Ngân hàng - Chi nhánh</label>
                    <input type="text" class="form-control" name="chi_nhanh_ngan_hang" placeholder="VD: VCB - CN Hà Nội">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Mã số thuế cá nhân</label>
                    <input type="text" class="form-control" name="mst_ca_nhan">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Nơi cấp MST</label>
                    <input type="text" class="form-control" name="noi_cap_mst">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Ngày cấp MST</label>
                    <input type="date" class="form-control" name="ngay_cap_mst">
                </div>
                 <div class="col-md-12">
                    <label class="form-label">Số sổ BHXH (Nếu có)</label>
                    <input type="text" class="form-control" name="so_bhxh" placeholder="Thầy cô thỉnh giảng không cần điền">
                </div>
             </div>

             <div class="section-title">5. Gia đình & Người phụ thuộc / Family & Dependents</div>
             <div class="row g-3">
                <div class="col-md-12"><label class="form-label text-primary">Thông tin con (Họ tên - Ngày sinh)</label></div>
                <div class="col-md-4"><input type="text" class="form-control" name="con_1" placeholder="Con 1"></div>
                <div class="col-md-4"><input type="text" class="form-control" name="con_2" placeholder="Con 2"></div>
                <div class="col-md-4"><input type="text" class="form-control" name="con_3" placeholder="Con 3"></div>
                
                <div class="col-md-12 mt-3"><label class="form-label text-primary">Người phụ thuộc (Giảm trừ gia cảnh)</label></div>
                <div class="col-md-4"><input type="text" class="form-control" name="npt_1_ten" placeholder="Họ tên NPT 1"></div>
                <div class="col-md-4"><input type="text" class="form-control" name="npt_1_mst" placeholder="MST NPT 1"></div>
                <div class="col-md-4"><input type="text" class="form-control" name="npt_1_qh" placeholder="Mối quan hệ"></div>
                <div class="col-md-4"><input type="text" class="form-control" name="npt_2_ten" placeholder="Họ tên NPT 2"></div>
                <div class="col-md-4"><input type="text" class="form-control" name="npt_2_mst" placeholder="MST NPT 2"></div>
                <div class="col-md-4"><input type="text" class="form-control" name="npt_2_qh" placeholder="Mối quan hệ"></div>

                <div class="col-md-12 mt-3">
                    <label class="form-label text-danger">Liên hệ khẩn cấp (Tên - SĐT - Quan hệ)</label>
                    <input type="text" class="form-control" name="lien_he_khan_cap" required>
                </div>
             </div>

             <div class="section-title">6. Thông tin công việc & Ảnh / Job & Photos</div>
             <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label">Loại hợp đồng / Contract Type</label>
                    <select class="form-select" name="loai_hop_dong" id="contractType" onchange="checkContractType()">
                        <option value="Hợp đồng thỉnh giảng">Hợp đồng thỉnh giảng</option>
                        <option value="Hợp đồng chính thức">Hợp đồng chính thức</option>
                        <option value="Khác">Khác</option>
                    </select>
                    <input type="text" class="form-control mt-2 d-none" name="loai_hop_dong_khac" id="otherContract" placeholder="Nhập loại hợp đồng...">
                </div>
                 <div class="col-md-6">
                    <label class="form-label">Phòng ban / Department</label>
                    <select class="form-select" name="phong_ban">
                        <option value="Phòng NSVH">Phòng NSVH</option>
                        <option value="Phòng MKT">Phòng MKT</option>
                        <option value="Phòng Kinh doanh">Phòng Kinh doanh</option>
                        <option value="Phòng Đào tạo">Phòng Đào tạo</option>
                        <option value="Ban Lãnh Đạo">Ban Lãnh Đạo</option>
                        <option value="Phòng Tuyển sinh">Phòng Tuyển sinh</option>
                        <option value="Phòng Kế toán">Phòng Kế toán</option>
                        <option value="Thư ký khoa">Thư ký khoa</option>
                        <option value="Khoa CH">Khoa CH</option>
                        <option value="Khoa BCH">Khoa BCH</option>
                    </select>
                </div>
                
                <div class="col-12">
                    <label class="form-label">Ảnh hồ sơ cá nhân (Tối đa 5 ảnh) *</label>
                    <input type="file" class="form-control" name="images" multiple accept="image/*" required>
                    <div class="note mt-1">Vui lòng chọn tối đa 5 ảnh (JPG, PNG). Hệ thống sẽ tự tạo thư mục lưu trữ tên bạn.</div>
                </div>
             </div>

            <div class="mt-4">
                <button type="submit" class="btn btn-primary btn-submit" id="btnSubmit">GỬI THÔNG TIN / SUBMIT</button>
            </div>
            <div id="loading" class="text-center mt-3 d-none">
                <div class="spinner-border text-primary" role="status"></div>
                <p>Đang xử lý dữ liệu, vui lòng đợi... / Processing...</p>
            </div>
        </form>
    </div>

    <script>
        function checkContractType() {
            const select = document.getElementById('contractType');
            const otherInput = document.getElementById('otherContract');
            if(select.value === 'Khác') {
                otherInput.classList.remove('d-none');
            } else {
                otherInput.classList.add('d-none');
            }
        }

        document.getElementById('hrForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const btn = document.getElementById('btnSubmit');
            const loading = document.getElementById('loading');
            
            btn.classList.add('d-none');
            loading.classList.remove('d-none');

            const formData = new FormData(this);
            // Gửi tới Webhook POST của N8N
            // LƯU Ý: Thay đổi đường dẫn này bằng link Webhook POST của bạn
            const webhookUrl = '/webhook/submit-ho-so'; 

            try {
                const response = await fetch(webhookUrl, {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    alert('Gửi thông tin thành công! Cảm ơn bạn.');
                    window.location.reload();
                } else {
                    alert('Có lỗi xảy ra. Vui lòng thử lại.');
                    btn.classList.remove('d-none');
                    loading.classList.add('d-none');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Lỗi kết nối tới máy chủ.');
                btn.classList.remove('d-none');
                loading.classList.add('d-none');
            }
        });
    </script>
</body>
</html>
`;

return {
  json: { html: html }
};
